%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%   Preamble   %%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,twoside,11pt]{article}

\usepackage[T1]{fontenc}                % Better wort separation
\usepackage[utf8]{inputenc}             % For äöüß etc.
\usepackage{a4wide}                     % Smaller margins
\usepackage{lmodern}                    % higher text resolution
\usepackage{enumerate}                  % Better enumerate definition
\usepackage{amsmath}                    % Makes everything better
\usepackage{amssymb}                    % for \mathbb, \mathfrak etc.
\usepackage{mathtools}                  % for \coloneqq etc.
\usepackage{dsfont}                     % Needed for \mathds{1} for the indicator fct.
\usepackage{xstring}                    % Used in \Pot
\usepackage[onehalfspacing]{setspace}   % Used in \insertion
\usepackage{fancyhdr}                   % Fancy Header
\usepackage{lastpage}                   % Page Number in Footer
\usepackage{listings}                   % For writing code
\usepackage{xcolor}
\usepackage{ifthen}


%%%%%%%%%%%%%         Header         %%%%%%%%%%%%%%

\fancypagestyle{noheader}{
  \fancyhead{}
  \renewcommand{\headrulewidth}{0pt}
}

\fancypagestyle{nofancy}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
}

\newcommand\firstpagestyle{\ifthenelse{\pageref{LastPage}>1}
  {\thispagestyle{noheader}}
  {\thispagestyle{nofancy}}
}

\pagestyle{fancy}
    
\pagestyle{fancy}
\addtolength{\headheight}{\baselineskip}
\fancyhead[LE,RO]{\AuthorName}
\fancyhead[LO,RE]{\CourseName}
\fancyhead[CO,CE]{\textbf{\SheetNumber}}
\renewcommand{\headrulewidth}{0.4pt}


%%%%%%%%%%%%%         Footer         %%%%%%%%%%%%%%

\cfoot{\thepage/\pageref{LastPage}}


%%%%%%%%%%%%%    Special Commands    %%%%%%%%%%%%%%

% indents a paragraph
\newenvironment{insertion}
  {\begin{list}{}
    {\setlength{\leftmargin}{5mm} \setlength{\rightmargin}{5mm}}
  \item[]
  }
  {\end{list}}

% Some Shortcuts
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Integ}{\mathbb{Z}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Rat}{\mathbb{Q}}
\newcommand{\Comp}{\mathbb{C}}
\newcommand{\terms}{\mathbb{T}}
\newcommand{\bbP}{\mathbb{P}}
\newcommand{\bbA}{\mathbb{A}}
\newcommand{\field}{\mathbb{F}}
\newcommand{\frakp}{\mathfrak{p}}
\newcommand{\frakq}{\mathfrak{q}}
\newcommand{\frakm}{\mathfrak{m}}
\newcommand{\im}{\operatorname{Im}}     	
\newcommand{\Ker}{\operatorname{Ker}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\Supp}{\operatorname{Supp}}
\newcommand{\Ann}{\operatorname{Ann}}
\newcommand{\HF}{\operatorname{HF}}
\newcommand{\HP}{\operatorname{HP}}
\newcommand{\HS}{\operatorname{HS}}
\newcommand{\HN}{\operatorname{HN}}
\newcommand{\hn}{\operatorname{hn}}
\newcommand{\mult}{\operatorname{mult}}
\newcommand{\LT}{\operatorname{LT}}
\newcommand{\LM}{\operatorname{LM}}
\newcommand{\IG}{\mathcal{I}_G}
\newcommand{\MS}{\operatorname{MS}}
\newcommand{\LC}{\operatorname{LC}}
\newcommand{\GL}{\operatorname{GL}}
\newcommand{\NR}{\operatorname{NR}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\End}{\operatorname{End}}
\newcommand{\ord}{\operatorname{ord}}
\newcommand{\Rel}{{\operatorname{Rel}}}
\newcommand{\Mat}{{\operatorname{Mat}}}
\newcommand{\trace}{\operatorname{trace}}
\renewcommand{\det}{\operatorname{det}}
\newcommand{\characteristic}{\operatorname{char}}
\newcommand{\Rad}{\operatorname{Rad}}
\newcommand{\rey}{\varrho}
\newcommand{\isom}{\cong}
\newcommand{\calA}{{\mathcal{A}}}
\newcommand{\calB}{{\mathcal{B}}}
\newcommand{\calC}{{\mathcal{C}}}
\newcommand{\calI}{{\mathcal{I}}}
\newcommand{\calZ}{{\mathcal{Z}}}
\newcommand{\tr}{^\operatorname{tr}}
\newcommand{\rewrite}[1]{{\stackrel{#1}{\longrightarrow}_s}}
\newcommand{\rewriteequiv}[1]{{\stackrel{#1}{\longleftrightarrow}_s}}
\newcommand{\reductionstep}[1]{{\stackrel{#1}{\longrightarrow}_{ss}}}
\newcommand{\colour}[1]{\color{#1}}
\newcommand{\bbar}[1]{{\mkern 4.0mu\overline{\mkern-4.0mu #1 \mkern-0.5mu}\mkern 0.5mu}}
\newcommand{\dotcup}{{\mathop{\dot\cup}}}

% small matrices
\newcommand{\mat}[1]{\begin{psmallmatrix}#1\end{psmallmatrix}}

% font size
\newcommand{\size}[1]{\fontsize{#1}{#1}\selectfont{}}



%%%%%%%%%%%%%  Exercise Environments %%%%%%%%%%%%%%

\newcounter{exercise}
\setcounter{exercise}{1}

% new command \subtask
\newcommand{\subtask}{\item}
\newcommand{\teilaufgabe}{\item}

% Auto-numbering, subtask format optional
% Example: \begin{exercise}[a)]
\newenvironment{exercise}[1][a)]
  {\textbf{Exercise \arabic{exercise}} \stepcounter{exercise}\begin{enumerate}[#1]{}}
  {\end{enumerate}}

% Auto-numbering, no subtasks
% Example: \begin{exercise*}
\newenvironment{exercise*}
  {\textbf{Exercise \arabic{exercise}} \stepcounter{exercise}\par}{\ \newline}

% Custom number, subtask format optional
% Example: \begin{exercisecn}[a)]{1}
\newenvironment{exercisecn}[2][a)]
  {\textbf{Exercise #2}\begin{enumerate}[#1]{}}
  {\end{enumerate}}

% Custom Number, no subtasks
% Example: \begin{exercisecn*}{1}
\newenvironment{exercisecn*}[2][\arabic{exercise}\stepcounter{exercise}]
  {\textbf{Exercise #2} \newline}{\ \newline}

%%%%%%%%%%%%%        No Indents      %%%%%%%%%%%%%%

\setlength{\parindent}{0mm}


%%%%%%%%%%    Listing for CoCoA code    %%%%%%%%%%%

\definecolor{altorange}{HTML}{F29300}
\definecolor{codeblue}{rgb}{0.13,0.13,1}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95, 0.95, 0.92}

\lstdefinelanguage{CoCoA}{
    morekeywords={Alias, Block, Break, Ciao, Continue, Define, Describe, Do, Elif, Else, End, EndBlock, EndTry, EndDefine, EndFor, EndForeach, EndIf, EndPackage, EndRepeat, EndUsing, EndWhile, Eof, False, For, Foreach, Global, Help, If, In, IsIn, NewLine, Not, On, Or, Package, Print, PrintLn, Quit, Repeat, Record, Return, Skip, Source, Step, Then, Time, To, True, Unset, Until, use, Using, Var, While, QQ, ZZ, BOOL, DegLex, DegRevLex, DEVICE, ERROR, FUNCTION, IDEAL, INT, Lex, MAT, MODULE, NULL, Null, PANEL, POLY, PosTo, RAT, RATFUN, RING, STRING, TAGGED, ToPos, TYPE, MODULEELEM, Xel, ZMOD},
    sensitive=false,
    morecomment=[l]{//},
    morecomment=[l]{--},
    morecomment=[s]{/*}{*/},
    morestring=[b]"
}
\lstset{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegray},
    keywordstyle=\color{codeblue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codegreen},
    basicstyle=\ttfamily\small,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    columns=fullflexible,
    keepspaces=true,
    language=CoCoA,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    xleftmargin=1cm,
    xrightmargin=8mm
}